--- 
---
<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>OS-GUI Test (Isolated)</title>
    <style>
      :root { color-scheme: light; }
      body { margin: 0; padding: 1.5rem; font-family: Arial, sans-serif; background: #f5f5f5; color: #111; }
      .frame { max-width: 960px; margin: 0 auto; background: white; border: 1px solid #ccc; box-shadow: 0 4px 18px rgba(0,0,0,0.08); border-radius: 6px; overflow: hidden; }
      .frame header { padding: 0.75rem 1rem; background: linear-gradient(180deg, #f8f8f8, #e9e9e9); border-bottom: 1px solid #d8d8d8; font-weight: 700; }
      .frame section { padding: 1rem; }
      .actions { display: flex; gap: 0.5rem; flex-wrap: wrap; margin: 1rem 0; }
      button { padding: 0.5rem 0.9rem; border: 1px solid #888; background: #efefef; cursor: pointer; border-radius: 4px; }
      #osgui-host { min-height: 240px; border: 1px dashed #999; padding: 0.5rem; background: #fafafa; }
      code { background: #f0f0f0; padding: 2px 4px; border-radius: 3px; }
    </style>
    <link rel="stylesheet" href="/os-gui/windows-98.css" />
    <link rel="stylesheet" href="/os-gui/layout.css" />
    <script is:inline src="/os-gui/jquery.min.js"></script>
    <script is:inline src="/os-gui/MenuBar.js"></script>
    <script is:inline src="/os-gui/$Window.js"></script>
  </head>
  <body>
    <div class="frame">
      <header>OS-GUI Prototype (Isolated)</header>
      <section>
        <p>This page loads <code>os-gui</code> by itself so you can compare behaviors without any site styling or WinBox scripts.</p>
        <ul>
          <li>Buttons below spawn os-gui windows inside the dashed box.</li>
          <li>Compare drag/resize/focus to your existing windows.</li>
          <li>Remove this page anytime if you don't need it.</li>
        </ul>
        <div class="actions">
          <label style="display:flex; align-items:center; gap:0.5rem;">
            <span>Theme:</span>
            <select id="osgui-theme">
              <option value="/os-gui/windows-98.css" selected>Windows 98</option>
              <option value="/os-gui/windows-default.css">Windows Default</option>
              <option value="/os-gui/blue.css">Blue</option>
              <option value="/os-gui/peggys-pastels.css">Peggy's Pastels</option>
            </select>
          </label>
        </div>
        <div class="actions">
          <button type="button" data-osgui-demo="basic">Open Basic Window</button>
          <button type="button" data-osgui-demo="resizable">Open Resizable</button>
          <button type="button" data-osgui-demo="modal">Open Modal</button>
        </div>
        <div id="osgui-host">
          <p style="margin:0;">os-gui windows will render within this box.</p>
        </div>
      </section>
    </div>

    <script is:inline>
      (() => {
        if (typeof window.$Window !== 'function' || !window.jQuery) {
          console.error('os-gui scripts failed to load locally');
          return;
        }

        const host = document.getElementById('osgui-host');
        const themeSelect = document.getElementById('osgui-theme');
        const buttons = document.querySelectorAll('[data-osgui-demo]');
        if (!host) return;

        if (themeSelect) {
          themeSelect.addEventListener('change', () => {
            const href = themeSelect.value;
            document.querySelectorAll('link[href*=\"/os-gui/\"]').forEach((el) => {
              if (el.getAttribute('rel') === 'stylesheet') {
                el.href = href;
              }
            });
          });
        }

        const spawn = (type) => {
          const $win = $Window({
            title: `OS-GUI ${type} window`,
            resizable: type !== 'basic',
            modal: type === 'modal'
          });
          const $content = jQuery('<div style="padding:8px;"></div>');
          $content.html(`<p>This is a <strong>${type}</strong> os-gui window.</p><p>Try dragging, resizing, focusing.</p>`);
          $win.$content.append($content);
          if (type === 'resizable') {
            $win.setDimensions({ innerWidth: 360, innerHeight: 220 });
          } else if (type === 'modal') {
            $win.setDimensions({ innerWidth: 300, innerHeight: 180 });
          }
          $win.center();
        };

        buttons.forEach((btn) => {
          btn.addEventListener('click', () => spawn(btn.dataset.osguiDemo));
        });
      })();
    </script>
  </body>
</html>
