---
export interface Props {
  petKey: 'bunny' | 'hazel' | string;
  petLabel: string;
}

const { petKey, petLabel } = Astro.props;
---

<section class="window-body pet-viewer" data-pet-viewer={petKey}>
  <div class="pet-loader" data-pet-loader>
    <h1>{petLabel}.exe</h1>
    <p data-pet-loader-text>Initializing {petLabel}...</p>
    <div class="progress-indicator segmented" aria-live="polite">
      <span class="progress-indicator-bar" data-pet-progress style="width: 0%;"></span>
    </div>
    <button type="button" data-pet-launch hidden>
      {petKey === 'bunny' ? 'Meow' : petKey === 'hazel' ? 'Woof' : 'Launch'}
    </button>
  </div>

  <div class="pet-menubar-shell" data-pet-menubar aria-label={`${petLabel} menu bar`}></div>

  <div data-pet-content hidden>
    <div class="pet-viewer-grid">
      <div class="pet-photo-card">
        <div class="pet-photo-frame">
          <img data-pet-photo alt={`${petLabel} photo`} loading="lazy" />
          <div class="pet-rare-flag" data-rare-flag hidden>Rare cameo!</div>
        </div>
        <div class="pet-photo-meta">
          <span data-photo-index>Unique 0 / 0</span>
          <span data-photo-rarity>Rarity chance: --</span>
          <span data-view-count>Viewed 0 times</span>
        </div>
      </div>

      <aside class="pet-side-panel">
        <div class="pet-meter">
          <div class="pet-meter-label">Happiness Meter</div>
          <div class="pet-meter-bar" role="presentation">
            <span class="pet-meter-fill" data-happy-bar style="width: 50%;"></span>
          </div>
          <div class="pet-meter-status" data-happy-label>Warming up...</div>
        </div>

        <div class="pet-action-row">
          <button type="button" data-pet-action="pet">Pet</button>
          <button type="button" data-pet-action="treat">Give Treat</button>
        </div>
        <div class="pet-action-row">
          <button type="button" data-pet-action="prev">Previous Photo</button>
          <button type="button" data-pet-action="next">Next Photo</button>
        </div>
      </aside>
    </div>

    <footer class="pet-footer">
      <div class="pet-status-line" data-status-line>Loading {petLabel} photos...</div>
      <div class="pet-rarity-controls">
        <span class="pet-rarity-label">Lucky Meter</span>
        <button type="button" data-pet-action="toggle-rare">Lucky Mode</button>
        <button type="button" data-pet-action="reset-chance">Reset</button>
      </div>
    </footer>
  </div>
</section>
